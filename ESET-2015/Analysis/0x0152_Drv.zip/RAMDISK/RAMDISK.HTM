<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./Ramdisk_files/filelist.xml">
<title>Ramdisk Sample Driver</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Raju Ramanathan</o:Author>
  <o:LastAuthor>Raju Ramanathan</o:LastAuthor>
  <o:Revision>4</o:Revision>
  <o:TotalTime>251</o:TotalTime>
  <o:Created>2000-02-24T06:44:00Z</o:Created>
  <o:LastSaved>2000-04-20T05:52:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>519</o:Words>
  <o:Characters>2960</o:Characters>
  <o:Company>Microsoft Corp.</o:Company>
  <o:Lines>24</o:Lines>
  <o:Paragraphs>5</o:Paragraphs>
  <o:CharactersWithSpaces>3635</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"MS Mincho";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"\FF2D\FF33 \660E\671D";
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:windowtext;}
h2
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
h3
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
h4
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:12.0pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:Verdana;
	mso-fareast-font-family:"MS Mincho";
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;}
p
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
pre
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Courier New";
	color:black;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:1393195126;
	mso-list-type:hybrid;
	mso-list-template-ids:370729058 -1300059700 -1881530170 -1340449604 -231067110 1994148784 499707558 165840150 746242626 -833344814;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<h2><span style='font-family:Verdana'>Ramdisk Sample Driver<o:p></o:p></span></h2>

<h3><span style='font-size:14.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>SUMMARY<o:p></o:p></span></h3>

<p class=MsoBodyText>This sample demonstrates a software only Windows<span
style='mso-bidi-font-size:10.0pt'>®</span> 2000 Device Driver. This driver
creates a RAM disk drive of the specified size. This Ramdisk can be used like
any other disk, but the contents of the disk will be lost when the machine is
shutdown. Generally the Windows<span style='mso-bidi-font-size:10.0pt'>®</span>
2000 cache manager does a much better job of optimizing memory usage than using
a Ramdisk.</p>

<p><span style='font-size:10.0pt;font-family:Verdana'>The driver building and
installation instructions given here apply only to Windows® 2000.<o:p></o:p></span></p>

<p><b><span style='font-size:10.0pt;font-family:Verdana'>Note</span></b><span
style='font-size:10.0pt;font-family:Verdana'>: This sample provides an example
of a minimal driver. Neither the driver nor the sample programs are intended
for use in a production environment. Rather, they are intended for educational
purposes and as a skeleton driver.<o:p></o:p></span></p>

<h3><span style='font-size:14.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>Building
the Sample<o:p></o:p></span></h3>

<p><span style='font-size:10.0pt;font-family:Verdana'>Click the Free Build
Environment or Checked Build Environment icon under your <b>Development Kits </b>program
group to set basic environment variables needed by the build utility. <o:p></o:p></span></p>

<p><span style='font-size:10.0pt;font-family:Verdana'>Change to the directory
containing the device source code, such as <b>CD C:\Drivers\Ramdisk</b><o:p></o:p></span></p>

<p><span style='font-size:10.0pt;font-family:Verdana'>Run <b>build -ceZ</b>, or
use the macro <b>BLD</b>. This behavior invokes the Microsoft make routines
that produce log files called Buildxxx.log, and also Buildxxx.wrn and
Buildxxx.err if there are any warnings or errors. Where xxx stands for <b>fre</b>
or <b>chk</b> depending on the environment chosen. If the build succeeds, the
driver Ramdisk.sys will be placed in a platform specific subdirectory of your <b>%TargetPath%</b>
directory specified in the Sources file.<o:p></o:p></span></p>

<h4><span style='font-size:14.0pt;mso-bidi-font-size:12.0pt;font-family:Verdana'>Installing
the Sample<o:p></o:p></span></h4>

<p><span style='font-size:10.0pt;font-family:Verdana'>To install the driver: <o:p></o:p></span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'><span style='font-size:10.0pt;
     font-family:Verdana'>Double-click the Add/Remove Hardware Wizard applet in
     Control Panel. <o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'><span style='font-size:10.0pt;
     font-family:Verdana'>Select Add/Troubleshoot a Device. <o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'><span style='font-size:10.0pt;
     font-family:Verdana'>Select “Add a new device”. <o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'><span style='font-size:10.0pt;
     font-family:Verdana'>Select “No, I Want to Select the Hardware from a
     list”. <o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'><span style='font-size:10.0pt;
     font-family:Verdana'>Select “Other devices” and then click Next. <o:p></o:p></span></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'><span style='font-size:10.0pt;
     font-family:Verdana'>Click the “Have Disk” button and point to the
     directory that contains Ramdisk.inf file. <o:p></o:p></span></li>
</ol>

<p><span style='font-size:10.0pt;font-family:Verdana'>The system copies the
Ramdisk.sys file to %systemroot%\system32\drivers directory and loads the
driver. <o:p></o:p></span></p>

<h3><span style='font-size:12.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>Configuring
the Ramdisk Drive<o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'>The Ramdisk can be configured using the registry.<span
style="mso-spacerun: yes">  </span>The RAMDISK.INF file contains the default
values for all the configurable parameters.<span style="mso-spacerun: yes"> 
</span>A brief description of each parameter follows:<o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>BreakOnEntry</span><span
style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'><span style="mso-spacerun: yes">       
</span>REG_DWORD<span style="mso-spacerun: yes">   </span>0<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>Boolean value, which determines
whether a break point will be generated during the DriverEntry routine.<span
style="mso-spacerun: yes">  </span>It has no effect in a free build of the
driver.<o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>DebugLevel</span><span
style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'><span style="mso-spacerun: yes">         
</span>REG_DWORD<span style="mso-spacerun: yes">   </span>0<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>This value specifies the level
of diagnostic messages produced.<span style="mso-spacerun: yes">  </span>Larger
values result in more verbose messages. It can take values from 0 to 3.<span
style="mso-spacerun: yes">  </span>It has no effect in a free build of the
driver. <o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>DebugComp</span><span
style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'><span style="mso-spacerun: yes">         
</span>REG_DWORD<span style="mso-spacerun: yes">   </span>0xFFFFFFFF<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>This value specifies the
components in which the debug messages to be printed. Each bit specifies the
component. See Debug.h for component list. It has no effect in a free build of
the driver. <o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>DiskSize</span><span
style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'><span style="mso-spacerun: yes">           
</span>REG_DWORD<span style="mso-spacerun: yes">   </span>0x100000 (1,048,576
1Mb)<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>The size of the Ramdisk drive in
bytes.<o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>DriveLetter</span><span
style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'><span style="mso-spacerun: yes">         </span>REG_SZ<span
style="mso-spacerun: yes">      </span>Z:<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>The default drive letter
associated with the Ramdisk drive.<o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>RootDirEntries</span><span
style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana;
font-weight:normal'><span style="mso-spacerun: yes">      </span>REG_DWORD<span
style="mso-spacerun: yes">   </span>512<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>The number of entries in the
root directory.<o:p></o:p></span></h3>

<h3><span style='font-size:10.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>SectorsPerCluster<span
style="mso-spacerun: yes">   </span></span><span style='font-size:10.0pt;
mso-bidi-font-size:13.5pt;font-family:Verdana;font-weight:normal'>REG_DWORD<span
style="mso-spacerun: yes">   </span>2<o:p></o:p></span></h3>

<h3 style='margin-left:.5in'><span style='font-size:10.0pt;mso-bidi-font-size:
13.5pt;font-family:Verdana;font-weight:normal'>The granularity of the
allocation unit.<o:p></o:p></span></h3>

<h3><span style='font-size:14.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></h3>

<h3><span style='font-size:14.0pt;mso-bidi-font-size:13.5pt;font-family:Verdana'>CODE
TOUR<o:p></o:p></span></h3>

<h4><span style='font-family:Verdana'>File Manifest<o:p></o:p></span></h4>

<pre><u>File<span style='mso-tab-count:2'>           </span>Description<o:p></o:p></u></pre><pre><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></pre><pre>Ramdisk.c<span style="mso-spacerun: yes">     </span>Source file for the Ramdisk sample driver</pre><pre>Pnp.c<span style="mso-spacerun: yes">         </span>Source file that handles the PnP IRPs</pre><pre>Ramdisk.h<span style="mso-spacerun: yes">     </span>Include file that contains the Ramdisk structures</pre><pre>Debug.h<span style="mso-spacerun: yes">       </span>Include file that contains the debug print definition </pre><pre>Sources<span style="mso-spacerun: yes">       </span>Generic file for building the code sample.</pre><pre>Ramdisk.inf<span style="mso-spacerun: yes">   </span>Installation file for installing the driver.</pre><pre>Ramdisk.htm<span style="mso-spacerun: yes">   </span>Sample Tour documentation for this sample (this file).</pre>

<h3 style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><span
style='font-family:Verdana'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></h3>

<p class=MsoBodyText style='tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

</div>

</body>

</html>
